<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Modal Navigation Form</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="site/static/docs/5.3/dist/css/bravo.min.css" rel="stylesheet">
</head>
<body>
    <div class="container mt-5">
        <h1>Modal Navigation Form Test</h1>
        <button type="button" class="btn btn-primary btn-lg" id="testBtn">Test Shopping Flow</button>
        
        <div id="result" class="mt-3"></div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="site/static/docs/5.3/dist/js/bravo.bundle.umd.js"></script>
    
    <script>
    document.getElementById('testBtn').addEventListener('click', () => {
        const nav = new Bravo.ModalNavigation();
        
        // Product listing
        const products = new Bravo.Modal({
            title: 'üõçÔ∏è Shop',
            content: `
                <div class='list-group'>
                    <button type='button' rel='checkout' class='list-group-item list-group-item-action'>
                        Go to Checkout
                    </button>
                </div>
            `
        });
        
        // Checkout
        const checkout = new Bravo.Modal({
            id: 'checkout',
            title: 'Checkout',
            content: `
                <form id='checkout-form'>
                    <div class='mb-3'>
                        <label class='form-label'>Username</label>
                        <input type='text' name='username' class='form-control' required>
                    </div>
                    <div class='mb-3'>
                        <label class='form-label'>Password</label>
                        <input type='password' name='password' class='form-control' required>
                    </div>
                    <button type='submit' class='btn btn-primary w-100'>
                        Complete Purchase
                    </button>
                </form>
            `
        });
        
        // Success
        const success = new Bravo.Modal({
            id: 'success',
            title: '‚úÖ Success',
            content: `
                <div class='text-center py-4'>
                    <h5>Form submission worked!</h5>
                    <button rel='close' class='btn btn-success'>Done</button>
                </div>
            `
        });
        
        // Handle checkout form
        checkout.addEventListener('submit.bs.modal', (e) => {
            console.log('submit.bs.modal event fired!');
            document.getElementById('result').innerHTML = '<div class="alert alert-success">Form submit event triggered successfully!</div>';
            e.preventDefault();
            
            // Navigate to success
            setTimeout(() => nav.push(success), 500);
        });
        
        nav.push(products);
        nav.show();
    });
    </script>
</body>
</html>