<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Complete Bravo Components Test</title>
    <link href="/dist/css/bravo.min.css" rel="stylesheet">
</head>
<body>
    <div class="container mt-5">
        <h1>Complete Bravo Components Test</h1>
        <p>Testing all Bootstrap components with document handlers and dismiss functionality:</p>
        
        <!-- Alert (now with DynamicObserver) -->
        <h2 class="mt-4">Alert</h2>
        <div class="alert alert-warning alert-dismissible fade show" role="alert">
            <strong>Alert!</strong> This alert has a dismiss button.
            <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
        </div>

        <!-- Toast (now with DynamicObserver) -->
        <h2 class="mt-4">Toast</h2>
        <div class="toast-container position-fixed bottom-0 end-0 p-3">
            <div id="liveToast" class="toast" role="alert">
                <div class="toast-header">
                    <strong class="me-auto">Toast</strong>
                    <small>Just now</small>
                    <button type="button" class="btn-close" data-bs-dismiss="toast"></button>
                </div>
                <div class="toast-body">
                    Hello, world! This is a toast message.
                </div>
            </div>
        </div>
        <button type="button" class="btn btn-primary" id="liveToastBtn">Show live toast</button>

        <!-- Dropdown (has custom Bravo features) -->
        <h2 class="mt-4">Dropdown</h2>
        <div class="dropdown d-inline-block me-2">
            <button class="btn btn-primary dropdown-toggle" type="button" data-bs-toggle="dropdown">
                Click Dropdown
            </button>
            <ul class="dropdown-menu">
                <li><a class="dropdown-item" href="#">Action</a></li>
                <li><a class="dropdown-item" href="#">Another action</a></li>
            </ul>
        </div>
        <div class="dropdown d-inline-block">
            <button class="btn btn-info dropdown-toggle" type="button" data-bs-toggle="dropdown" data-bs-trigger="hover">
                Hover Dropdown
            </button>
            <ul class="dropdown-menu">
                <li><a class="dropdown-item" href="#">Hover action</a></li>
            </ul>
        </div>

        <!-- Modal (has custom Bravo features) -->
        <h2 class="mt-4">Modal</h2>
        <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#exampleModal">
            Launch Modal
        </button>
        <div class="modal fade" id="exampleModal" tabindex="-1">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title">Modal title</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                    </div>
                    <div class="modal-body">
                        Modal body text goes here.
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                        <button type="button" class="btn btn-primary">Save changes</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Other Components (simplified with DynamicObserver) -->
        <h2 class="mt-4">Other Interactive Components</h2>
        
        <!-- Collapse -->
        <p>
            <button class="btn btn-primary" type="button" data-bs-toggle="collapse" data-bs-target="#collapseExample">
                Toggle Collapse
            </button>
        </p>
        <div class="collapse" id="collapseExample">
            <div class="card card-body">
                This content collapses!
            </div>
        </div>

        <!-- Tabs -->
        <ul class="nav nav-tabs mt-3" role="tablist">
            <li class="nav-item" role="presentation">
                <button class="nav-link active" data-bs-toggle="tab" data-bs-target="#home">Home</button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" data-bs-toggle="tab" data-bs-target="#profile">Profile</button>
            </li>
        </ul>
        <div class="tab-content">
            <div class="tab-pane fade show active" id="home" role="tabpanel">
                <p class="mt-2">Home tab content</p>
            </div>
            <div class="tab-pane fade" id="profile" role="tabpanel">
                <p class="mt-2">Profile tab content</p>
            </div>
        </div>

        <!-- Button (has custom Bravo loader feature) -->
        <h2 class="mt-4">Button</h2>
        <button type="button" class="btn btn-primary" data-bs-toggle="button">Toggle button</button>
        <button type="button" class="btn btn-primary" data-bs-loader="Processing...">
            Click to Show Loader
        </button>

        <!-- Offcanvas -->
        <h2 class="mt-4">Offcanvas</h2>
        <button class="btn btn-primary" type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasExample">
            Toggle Offcanvas
        </button>
        <div class="offcanvas offcanvas-start" tabindex="-1" id="offcanvasExample">
            <div class="offcanvas-header">
                <h5 class="offcanvas-title">Offcanvas</h5>
                <button type="button" class="btn-close" data-bs-dismiss="offcanvas"></button>
            </div>
            <div class="offcanvas-body">
                Some text as placeholder. Notice the dismiss button works!
            </div>
        </div>

        <!-- Dynamic Content Test -->
        <div class="mt-5 p-3 bg-light">
            <h3>Test Dynamic Content (DynamicObserver)</h3>
            <button id="addDynamicContent" class="btn btn-success">Add Dynamic Components</button>
            <div id="dynamicContainer" class="mt-3"></div>
        </div>

        <div class="mt-5 p-3 bg-info text-white">
            <h3>Test Instructions:</h3>
            <ol>
                <li><strong>Alert dismissal:</strong> Click X to dismiss alert</li>
                <li><strong>Toast:</strong> Click "Show live toast", then dismiss with X</li>
                <li><strong>All interactive components:</strong> Click toggles, buttons, etc.</li>
                <li><strong>Dynamic content:</strong> Add components dynamically - they should work immediately</li>
                <li><strong>Keyboard navigation:</strong> Tab through dropdowns, use arrow keys</li>
                <li><strong>Dismiss buttons:</strong> All X buttons should work (modal, offcanvas, etc.)</li>
            </ol>
        </div>
    </div>

    <script src="/dist/js/bravo.bundle.umd.js"></script>
    <script>
        // Test toast functionality
        document.getElementById('liveToastBtn').addEventListener('click', function() {
            const toastLive = document.getElementById('liveToast');
            const toast = new bootstrap.Toast(toastLive);
            toast.show();
        });

        // Test button loader
        document.querySelector('[data-bs-loader]').addEventListener('click', function(e) {
            this.showLoader();
            setTimeout(() => {
                this.hideLoader();
            }, 2000);
        });

        // Test dynamic content (DynamicObserver)
        document.getElementById('addDynamicContent').addEventListener('click', function() {
            const container = document.getElementById('dynamicContainer');
            container.innerHTML = `
                <div class="alert alert-success alert-dismissible fade show" role="alert">
                    <strong>Dynamic Alert!</strong> This was added dynamically.
                    <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
                </div>
                
                <div class="dropdown mt-2">
                    <button class="btn btn-warning dropdown-toggle" type="button" data-bs-toggle="dropdown">
                        Dynamic Dropdown
                    </button>
                    <ul class="dropdown-menu">
                        <li><a class="dropdown-item" href="#">Dynamic Item 1</a></li>
                        <li><a class="dropdown-item" href="#">Dynamic Item 2</a></li>
                    </ul>
                </div>
                
                <button class="btn btn-info mt-2" type="button" data-bs-toggle="collapse" data-bs-target="#dynamicCollapse">
                    Dynamic Collapse
                </button>
                <div class="collapse mt-2" id="dynamicCollapse">
                    <div class="card card-body">
                        Dynamically added collapsible content!
                    </div>
                </div>
                
                <div class="toast-container position-fixed bottom-0 start-0 p-3">
                    <div id="dynamicToast" class="toast" role="alert">
                        <div class="toast-header">
                            <strong class="me-auto">Dynamic Toast</strong>
                            <button type="button" class="btn-close" data-bs-dismiss="toast"></button>
                        </div>
                        <div class="toast-body">
                            This toast was added dynamically!
                        </div>
                    </div>
                </div>
                <button type="button" class="btn btn-secondary mt-2" onclick="new bootstrap.Toast(document.getElementById('dynamicToast')).show()">
                    Show Dynamic Toast
                </button>
            `;
        });
    </script>
</body>
</html>